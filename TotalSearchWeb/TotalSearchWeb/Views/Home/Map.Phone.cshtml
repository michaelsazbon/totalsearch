@model TotalSearchWeb.Models.SearchViewModel


@using PagedList.Mvc;

@functions{
    public string GetAntiForgeryToken()
    {
        string cookieToken, formToken;
        AntiForgery.GetTokens(null, out cookieToken, out formToken);
        return cookieToken + ":" + formToken;
    }
}

<!DOCTYPE html>
<html>
  <head>
    <title>Total Search</title>
    <!--<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />-->
      <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta charset="utf-8" />
    <link type="text/css" rel="Stylesheet" href="../../Content/PagedList.css" />
      <link type="text/css" rel="Stylesheet" href="../../Content/Style.css" />


    <script type="text/javascript" src="../../Scripts/Utils.js"></script>

    <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=true"></script>
    <script src="../../Scripts/google-maps-3-vs-1-0.js" type="text/javascript"></script>

     <script src="../../Scripts/jquery-1.10.2.min.js" type="text/javascript"></script>
     <!-- <script src="../../Scripts/knockout-2.2.1.js" type="text/javascript"></script> -->

     <!--<script src="../../Scripts/jquery.tmpl.min.js" type="text/javascript"></script>-->

     <script src="../../Scripts/knockout-2.3.0.js" type="text/javascript"></script>

     <!--<script src="../../Scripts/knockout.simpleGrid.js" type="text/javascript"></script>-->

     <script src="../../Scripts/highcharts.js" type="text/javascript"></script>
     

     <script src="../../Scripts/aes.js" type="text/javascript"></script>
     <script src="../../Scripts/enc-base64-min.js" type="text/javascript"></script>

     <script type="text/javascript" src="../../Scripts/geoxml3.js"></script>

     <script src="../../Scripts/Location.js" type="text/javascript"></script>


     <!-- Jquery mobile UI RTL -->

    <link type="text/css" rel="Stylesheet" href="../../Content/rtl.jquery.mobile-1.3.0.css" />
    <script src="../../Scripts/rtl.jquery.mobile-1.3.0.js" type="text/javascript"></script>

    <!-- <link type="text/css" rel="Stylesheet" href="../../Content/jquery.mobile-1.3.2.css" />
    <script src="../../Scripts/jquery.mobile-1.3.2.js" type="text/javascript"></script>-->

    <script src="../../Scripts/jquerymobile-swipeupdown.js" type="text/javascript"></script>

      <link rel="stylesheet" href="../../Content/jqm-inlinetabs.css" />
      <script src="../../Scripts/jqm-inlinetabs.js" type="text/javascript"></script>

      <script src="../../Scripts/App.js" type="text/javascript"></script>

  </head>
  <body dir="rtl">

  <div id="header">
  
  </div>

  <input id="antiForgeryToken" type="hidden" value="@GetAntiForgeryToken()" />

  @Html.AntiForgeryToken()


  <div id="searchForm" class="mobileform">

  @using (Html.BeginForm("Map", "Home", FormMethod.Get))
  {

    @Html.ValidationSummary(false)

    <div data-role="inlinetabs" id="tabs">

            <ul>
                <li data-tab="position" >מיקום</li>
                <li data-tab="typebien" >סוג נכס</li>
                <li data-tab="detailsbien" >פרטי הנכ</li>
                <li data-tab="fonctionnalites" >תכונות</li>
                <li data-tab="prix" >מחיר</li>
            </ul>

        <div data-tab="position">


            <div data-role="fieldcontain">
                <label for="zonemenu">
                    אזור
                </label>
                @Html.DropDownListFor(
                                       model => model.zone,
                                       new SelectList(
                                              new List<Object>{
                                                   new { value = "" , text = "כל האיזורים"  },
                                                   new { value = "אזור צפון" , text = "אזור צפון" },
                                                   new { value = "חיפה וחוף הכרמל" , text = "חיפה וחוף הכרמל" },
                                                   new { value = "קריות" , text = "קריות" },
                                                   new { value = "עכו - נהריה" , text = "עכו - נהריה" },
                                                   new { value = "גליל ועמקים" , text = "גליל ועמקים" },
                                                   new { value = "טבריה והסביבה" , text = "טבריה והסביבה" },
                                                   new { value = "עמק יזרעאל" , text = "עמק יזרעאל" },
                                                   new { value = "כרמיאל והסביבה" , text = "כרמיאל והסביבה" },
                                                   new { value = "מושבים בצפון" , text = "מושבים בצפון" },
                                                   new { value = "אזור השרון והסביבה" , text = "אזור השרון והסביבה" },
                                                   new { value = "זכרון - בנימינה" , text = "זכרון - בנימינה" },
                                                   new { value = "חדרה וישובי עמק חפר" , text = "חדרה וישובי עמק חפר" },
                                                   new { value = "פרדס חנה - כרכור" , text = "פרדס חנה - כרכור" },
                                                   new { value = "יישובי השומרון" , text = "יישובי השומרון" },
                                                   new { value = "נתניה והסביבה" , text = "נתניה והסביבה" },
                                                   new { value = "קיסריה והסביבה" , text = "קיסריה והסביבה" },
                                                   new { value = "רמת השרון - הרצליה" , text = "רמת השרון - הרצליה" },
                                                   new { value = "רעננה - כפר סבא" , text = "רעננה - כפר סבא" },
                                                   new { value = "הוד השרון והסביבה" , text = "הוד השרון והסביבה" },
                                                   new { value = "מושבים בשרון" , text = "מושבים בשרון" },
                                                   new { value = "אזור המרכז" , text = "אזור המרכז" },
                                                   new { value = "תל אביב" , text = "תל אביב" },
                                                   new { value = "תל אביב - צפון" , text = "תל אביב - צפון" },
                                                   new { value = "תל אביב - מרכז" , text = "תל אביב - מרכז" },
                                                   new { value = "תל אביב - דרום" , text = "תל אביב - דרום" },
                                                   new { value = "בקעת אונו" , text = "בקעת אונו" },
                                                   new { value = "חולון - בת ים" , text = "חולון - בת ים" },
                                                   new { value = "פתח תקוה והסביבה" , text = "פתח תקוה והסביבה" },
                                                   new { value = "ראשל\"צ והסביבה" , text = "ראשל\"צ והסביבה" },
                                                   new { value = "רמת גן - גבעתיים" , text = "רמת גן - גבעתיים" },
                                                   new { value = "ראש העין והסביבה" , text = "ראש העין והסביבה" },
                                                   new { value = "מושבים במרכז" , text = "מושבים במרכז" },
                                                   new { value = "ירושלים והסביבה" , text = "ירושלים והסביבה" },
                                                   new { value = "מודיעין והסביבה" , text = "מודיעין והסביבה" },
                                                   new { value = "בית שמש והסביבה" , text = "בית שמש והסביבה" },
                                                   new { value = "מושבים באזור ירושלים" , text = "מושבים באזור ירושלים" },
                                                   new { value = "אזור השפלה והסביבה" , text = "אזור השפלה והסביבה" },
                                                   new { value = "נס ציונה - רחובות" , text = "נס ציונה - רחובות" },
                                                   new { value = "אשדוד - אשקלון" , text = "אשדוד - אשקלון" },
                                                   new { value = "רמלה - לוד" , text = "רמלה - לוד" },
                                                   new { value = "גדרה יבנה והסביבה" , text = "גדרה יבנה והסביבה" },
                                                   new { value = "מושבים בשפלה" , text = "מושבים בשפלה" },
                                                   new { value = "אזור דרום" , text = "אזור דרום" },
                                                   new { value = "באר שבע והסביבה" , text = "באר שבע והסביבה" },
                                                   new { value = "אילת והערבה" , text = "אילת והערבה" },
                                                   new { value = "מושבים בדרום" , text = "מושבים בדרום" },
                                                   new { value = "חו\"ל" , text = "חו\"ל" }
                                                },
                                              "value",
                                              "text",
                                            Model.zone
           ), new { data_bind = "value: zone, event: { change: resetPaging }", id = "zonemenu" }
                                    )


            </div>
            <div data-role="fieldcontain">
                <label for="villeinput">
                    עיר\ישוב
                </label>
                @Html.TextBoxFor(model => model.ville, new { data_bind = "value: ville, event: { change: resetPaging }", id = "villeinput" })
            </div>
            <div data-role="fieldcontain">
                <label for="quartierinput">
                    שכונה
                </label>
                @Html.TextBoxFor(model => model.quartier, new { data_bind = "value: quartier, event: { change: resetPaging }", id = "quartierinput" })

            </div>

        </div>
        <div data-tab="typebien" >

            <div data-role="fieldcontain">
                <label for="typebienmenu">
                    סוג נכס
                </label>
                @Html.DropDownListFor(
                           model => model.typebien,
                           new SelectList(
                                  new List<Object>{
                                       new { value = "" , text = "כל הסוגים"  },
                                       new { value = "גג/פנטהאוזים" , text = "גג/פנטהאוזים" },
                                       new { value = "דו משפחתיים" , text = "דו משפחתיים" },
                                       new { value = "דופלקסים" , text = "דופלקסים" },
                                       new { value = "דירות" , text = "דירות" },
                                       new { value = "דירות גן" , text = "דירות גן" },
                                       new { value = "דירות לתקופות קצרות" , text = "דירות לתקופות קצרות" },
                                       new { value = "דירות נופש" , text = "דירות נופש" },
                                       new { value = "החלפת דירות" , text = "החלפת דירות" },
                                       new { value = "חיפוש נכסים" , text = "חיפוש נכסים" },
                                       new { value = "חניות" , text = "חניות" },
                                       new { value = "טריפלקס" , text = "טריפלקס" },
                                       new { value = "יחידות דיור" , text = "יחידות דיור" },
                                       new { value = "כללי" , text = "כללי" },
                                       new { value = "מבנים ניידים/קרוואן" , text = "מבנים ניידים/קרוואן" },
                                       new { value = "מגרשים" , text = "מגרשים" },
                                       new { value = "מחסנים" , text = "מחסנים" },
                                       new { value = "מרתפים/פרטרים" , text = "מרתפים/פרטרים" },
                                       new { value = "משק חקלאי" , text = "משק חקלאי" },
                                       new { value = "סטודיו/לופט" , text = "סטודיו/לופט" },
                                       new { value = "פרטיים/קוטג'ים" , text = "פרטיים/קוטג'ים" },
                                       new { value = "קבוצת רכישה" , text = "קבוצת רכישה" }

                                    },
                                  "value",
                                  "text",
                             Model.typebien
           ), new { data_bind = "value: typebien, event: { change: resetPaging }", id = "typebienmenu" }
                        )
            </div>

        </div>

        <div data-tab="detailsbien">

            <div class="demipage1">
                <div data-role="fieldcontain">
                    <label for="chambreminmenu">
                        מחדרים
                    </label>
                    @Html.DropDownListFor(
                                    model => model.nombrechambremin,
                                       new SelectList(
                                              new List<Object>{
                                                   new { value = "" , text = "הכל"  },
                                                   new { value = "1" , text = "1" },
                                                   new { value = "1.5" , text = "1.5" },
                                                   new { value = "2" , text = "2" },
                                                   new { value = "2.5" , text = "2.5" },
                                                   new { value = "3" , text = "3" },
                                                   new { value = "3.5" , text = "3.5" },
                                                   new { value = "4" , text = "4" },
                                                   new { value = "4.5" , text = "4.5" },
                                                   new { value = "5" , text = "5" },
                                                   new { value = "5.5" , text = "5.5" },
                                                   new { value = "6" , text = "6" },
                                                   new { value = "7" , text = "7" },
                                                   new { value = "8" , text = "8" },
                                                   new { value = "9" , text = "9" },
                                                   new { value = "10" , text = "10" },
                                                   new { value = "11" , text = "11" },
                                                   new { value = "12" , text = "12" }
                                                },
                                              "value",
                                              "text",
                                        Model.nombrechambremin
                                       )
                , new { data_bind = "value: nombrechambremin, event: { change: resetPaging }", id = "chambreminmenu" }
                                    )
                </div>
            </div>

            <div class="demipage">
                <div data-role="fieldcontain">
                    <label for="chambreminmenu">
                        עד חדרים
                    </label>
                    @Html.DropDownListFor(
                                    model => model.nombrechambremax,
                                       new SelectList(
                                              new List<Object>{
                                                   new { value = "" , text = "הכל"  },
                                                   new { value = "1" , text = "1" },
                                                   new { value = "1.5" , text = "1.5" },
                                                   new { value = "2" , text = "2" },
                                                   new { value = "2.5" , text = "2.5" },
                                                   new { value = "3" , text = "3" },
                                                   new { value = "3.5" , text = "3.5" },
                                                   new { value = "4" , text = "4" },
                                                   new { value = "4.5" , text = "4.5" },
                                                   new { value = "5" , text = "5" },
                                                   new { value = "5.5" , text = "5.5" },
                                                   new { value = "6" , text = "6" },
                                                   new { value = "7" , text = "7" },
                                                   new { value = "8" , text = "8" },
                                                   new { value = "9" , text = "9" },
                                                   new { value = "10" , text = "10" },
                                                   new { value = "11" , text = "11" },
                                                   new { value = "12" , text = "12" }
                                                },
                                              "value",
                                              "text",
                                        Model.nombrechambremax
                                       )
                , new { data_bind = "value: nombrechambremax, event: { change: resetPaging }", id = "chambremaxmenu" }
                                    )
                </div>
            </div>



            <div class="demipage1">
                <div data-role="fieldcontain">
                    <label for="etageminmenu">
                        מקומה
                    </label>
                    @Html.DropDownListFor(
                                     model => model.etagemin,
                                           new SelectList(
                                                  new List<Object>{
                                                       new { value = "" , text = "הכל"  },
                                                       new { value = "0" , text = "קרקע" },
                                                       new { value = "1" , text = "1" },
                                                       new { value = "2" , text = "2" },
                                                       new { value = "3" , text = "3" },
                                                       new { value = "4" , text = "4" },
                                                       new { value = "5" , text = "5" },
                                                       new { value = "6" , text = "6" },
                                                       new { value = "7" , text = "7" },
                                                       new { value = "8" , text = "8" },
                                                       new { value = "9" , text = "9" },
                                                       new { value = "10" , text = "10" },
                                                       new { value = "11" , text = "11" },
                                                       new { value = "12" , text = "12" },
                                                       new { value = "13" , text = "13" },
                                                       new { value = "14" , text = "14" },
                                                       new { value = "15" , text = "15" }
                                                    },
                                                  "value",
                                                  "text",
                                    Model.etagemin
                                           )
                     , new { data_bind = "value: etagemin, event: { change: resetPaging }", id = "etageminmenu" }
                                        )
                </div>
            </div>

            <div class="demipage">
                <div data-role="fieldcontain">
                    <label for="etagemaxmenu">
                        עד קומה
                    </label>
                    @Html.DropDownListFor(
                                     model => model.etagemax,
                                           new SelectList(
                                                  new List<Object>{
                                                      new { value = "" , text = "הכל"  },
                                                       new { value = "0" , text = "קרקע" },
                                                       new { value = "1" , text = "1" },
                                                       new { value = "2" , text = "2" },
                                                       new { value = "3" , text = "3" },
                                                       new { value = "4" , text = "4" },
                                                       new { value = "5" , text = "5" },
                                                       new { value = "6" , text = "6" },
                                                       new { value = "7" , text = "7" },
                                                       new { value = "8" , text = "8" },
                                                       new { value = "9" , text = "9" },
                                                       new { value = "10" , text = "10" },
                                                       new { value = "11" , text = "11" },
                                                       new { value = "12" , text = "12" },
                                                       new { value = "13" , text = "13" },
                                                       new { value = "14" , text = "14" },
                                                       new { value = "15" , text = "15" }
                                                    },
                                                  "value",
                                                  "text",
                                    Model.etagemax
                                           )
                    , new { data_bind = "value: etagemax, event: { change: resetPaging }", id = "etagemaxmenu" }
                                        )
                </div>
            </div>

            <div class="demipage1">
                <div data-role="fieldcontain">
                    <label for="superficieminmenu">
                        ממ"ר
                    </label>
                    @Html.TextBoxFor(model => model.superficiemin, new { data_bind = "value: superficiemin, event: { change: resetPaging }", id = "superficieminmenu" })

                </div>
            </div>

            <div class="demipage">
                <div data-role="fieldcontain">
                    <label for="superficiemaxmenu">
                        עד מ"ר
                    </label>
                    @Html.TextBoxFor(model => model.superficiemax, new { data_bind = "value: superficiemax, event: { change: resetPaging }", id = "superficiemaxmenu" })

                </div>
            </div>
        </div>

        <div data-tab="prix" class="ui-content">

            <div class="demipage1">
                <div data-role="fieldcontain">
                    <label for="prixmininput">
                        ממחיר
                    </label>
                    @Html.TextBoxFor(model => model.prixmin, new { data_bind = "value: prixmin, event: { change: resetPaging }", id = "prixmininput" })

                </div>
            </div>

            <div class="demipage">
                <div data-role="fieldcontain">
                    <label for="prixmaxinput">
                        עד מחיר
                    </label>
                    @Html.TextBoxFor(model => model.prixmax, new { data_bind = "value: prixmax, event: { change: resetPaging }", id = "prixmaxinput" })

                </div>
            </div>

        </div>

        <div data-tab="fonctionnalites">

            <div id="checkboxes6" data-role="fieldcontain">
                <fieldset data-role="controlgroup" data-type="vertical">
                    <legend>

                    </legend>

                    @Html.CheckBoxFor(model => model.meublee, new { data_bind = "checked: meublee, event: { change: resetPaging }", id = "meubleecheckbox" })
                    <label for="meubleecheckbox">
                        ריהוט
                    </label>

                    @Html.CheckBoxFor(model => model.garage, new { data_bind = "checked: garage, event: { change: resetPaging }", id = "garagecheckbox" })
                    <label for="garagecheckbox">
                        חניה
                    </label>

                    @Html.CheckBoxFor(model => model.ascenseur, new { data_bind = "checked: ascenseur, event: { change: resetPaging }", id = "ascenseurcheckbox" })
                    <label for="ascenseurcheckbox">
                        מעלית
                    </label>

                    @Html.CheckBoxFor(model => model.bareaux, new { data_bind = "checked: bareaux, event: { change: resetPaging }", id = "bareauxcheckbox" })
                    <label for="bareauxcheckbox">
                        סורגים
                    </label>

                    @Html.CheckBoxFor(model => model.climatisation, new { data_bind = "checked: climatisation, event: { change: resetPaging }", id = "climatisationcheckbox" })
                    <label for="climatisationcheckbox">
                        מיזוג
                    </label>

                    @Html.CheckBoxFor(model => model.chambreforte, new { data_bind = "checked: chambreforte, event: { change: resetPaging }", id = "chambrefortecheckbox" })
                    <label for="chambrefortecheckbox">
                        ממ"ד
                    </label>

                    @Html.CheckBoxFor(model => model.balcon, new { data_bind = "checked: balcon, event: { change: resetPaging }", id = "balconcheckbox" })
                    <label for="balconcheckbox">
                        מרפסת
                    </label>

                    @Html.CheckBoxFor(model => model.renovee, new { data_bind = "checked: renovee, event: { change: resetPaging }", id = "renoveecheckbox" })
                    <label for="renoveecheckbox">
                        משופצת
                    </label>

                    @Html.CheckBoxFor(model => model.cave, new { data_bind = "checked: renovee, event: { change: resetPaging }", id = "cavecheckbox" })
                    <label for="cavecheckbox">
                        מחסן
                    </label>

                    @Html.CheckBoxFor(model => model.acceshandicape, new { data_bind = "checked: acceshandicape, event: { change: resetPaging }", id = "acceshandicapecheckbox" })
                    <label for="acceshandicapecheckbox">
                        גישה לנכים
                    </label>

                    @Html.CheckBoxFor(model => model.animauxdomestique, new { data_bind = "checked: animauxdomestique, event: { change: resetPaging }", id = "animauxdomestiquecheckbox" })
                    <label for="animauxdomestiquecheckbox">
                        חיות
                    </label>

                    @Html.CheckBoxFor(model => model.plusieursresidents, new { data_bind = "checked: plusieursresidents, event: { change: resetPaging }", id = "plusieursresidentscheckbox" })
                    <label for="plusieursresidentscheckbox">
                        מ.שותפים
                    </label>

                    @Html.CheckBoxFor(model => model.entreeimmediate, new { data_bind = "checked: entreeimmediate, event: { change: resetPaging }", id = "entreeimmediatecheckbox" })
                    <label for="entreeimmediatecheckbox">
                        כניסה מיידית
                    </label>

                    @Html.CheckBoxFor(model => model.entreeflexible, new { data_bind = "checked: entreeflexible, event: { change: resetPaging }", id = "entreeflexiblecheckbox" })
                    <label for="entreeflexiblecheckbox">
                        כניסה גמיש
                    </label>
                </fieldset>
            </div>

            <div data-role="fieldcontain">
                <label for="dateentreemenu">
                    כניסה מתאריך
                </label>
                @Html.TextBoxFor(model => model.dateentree, new { data_bind = "value: dateentree, event: { change: resetPaging }", id = "dateentreemenu" })

            </div>
        </div>

    </div>
  }



  </div>

  <div id="SearchResults">

    
        <br />

     <!-- <div data-role="panel" id="mypanel">-->
          <!-- panel content goes here -->
          <div class="inside">
              <ul data-role="listview" data-inset="true">
                  <li data-role="list-divider"><span class="ui-li-count"><input data-role="none" id="checkmarkerall" onclick="$('.checkmarker').trigger('click');" name="checkmarkerall" type="checkbox" /></span></li>

                  <!-- ko foreach: SearchResults -->
                  <li>
                      <img style="float: right; width:140px; height:100px; padding: 10px 0 0 10px" data-bind="attr:{src: urlimage()}" />

                      <p>
                          <span style="font-size:16px" data-bind="text: ville()"></span>,
                          <span style="font-size:16px" data-bind="text: adresse()"></span>
                      </p>
                      <p>
                          <span style="font-size:14px" data-bind="text: typebien()"></span>,
                          <span style="font-size:14px" data-bind="text: nombrechambre()"></span> חדרים
                      </p>
                      <p>
                          כניסה :
                          <span style="font-size:14px" data-bind="text: DateEntree()"></span>
                      </p>
                      <p style="font-size:14px" data-bind="text: prix() + ' ₪'"></p>
                      <p style="font-size:14px" data-bind="text: date().substring(0,10)"></p>

                      <input style="position: absolute; font-size: 11px; font-weight: bold; padding: .2em .5em; top: 50%; margin-top: -.9em; left: 10px;" data-role="none" data-bind="event: { change: function() { toggleBounce($index()); } }" class="checkmarker" type="checkbox" />
                  </li>
                  <!-- /ko -->


                  
              </ul>




              <!--<br />
        <div data-bind='simpleGrid: gridViewModel'> </div>
        <br />-->



              <ul class="pager pager2">
                  <li data-bind="css: {'disabled': !previousPageEnabled()}">
                      <a href="#" data-bind="click: previousPage">Previous</a>
                  </li>
                  <!-- ko foreach: Paging -->
                  <li>
                      <a href="#" data-bind="click: function() { $root.goToPage($data); } , css: { selected: $data == $root.Page() }">
                          <span data-bind="text: $data"></span>
                      </a>
                  </li>
                  <!-- /ko -->
                  <li data-bind="css: {'disabled': !nextPageEnabled()}">
                      <a href="#" data-bind="click: nextPage">Next</a>
                  </li>
              </ul>

              <div align="center">
                  <select data-bind="options: availablePerPage, value: PageSize, event: { change: resetPaging } "></select>
                  <span data-bind="text: recordMessage()"></span>
              </div>

          </div>    
    <!--</div>-->
  </div>

    <div id="maincontainer">

        <div id="map-canvas"></div>

    </div>

    <div data-bind="map:map" ></div>

    

  </body>
</html>